---
Test_01:
  inherits:
    - Test_02
  all:
    command-line:
      test_01_all_cmd_01: true
      test_01_all_cmd_02:
        test_01_all_cmd_03:
          test_01_all_cmd_04: true
          test_01_all_cmd_05:
            - all_cmd 1
            - all_cmd 2
        test_01_all_cmd_06: 3
      test_01_all_cmd_07: test07
    metadata:
      test_01_all_md_01: true
      test_01_all_md_02: all_md_1
      test_01_all_md_03:
        - all_md_2
        - all_md_3
  pdf: &pdf-test
    command-line:
      test_01_pdf_cmd_01: true
      test_01_pdf_cmd_02:
        test_01_pdf_cmd_03:
          test_01_pdf_cmd_04: true
          test_01_pdf_cmd_05:
            - pdf_cmd 1
            - pdf_cmd 2
        test_01_pdf_cmd_06: 3
      test_01_pdf_cmd_07: test07
    metadata:
      test_01_pdf_md_01: true
      test_01_pdf_md_02: pdf_md_1
      test_01_pdf_md_03:
        - pdf_md_2
        - pdf_md_3
  latex:
    << : *pdf-test
  # used to test extending all
  html:
    command-line:
      test_01_all_cmd_02:
        test_01_all_cmd_03:
          test_01_all_cmd_05:
            - all_cmd 3
            - all_cmd 4
        test_01_html_cmd_08: 3
    metadata:
      test_01_html_md_01: true
      test_01_html_md_02: html_md_1
      test_01_html_md_03:
        - html_md_2
        - html_md_3

Test_02:
  all:
    command-line:
      test_02_all_cmd_01: true
      test_02_all_cmd_02:
        test_02_all_cmd_03:
          test_02_all_cmd_04: true
          test_02_all_cmd_05:
            - all_cmd 3
            - all_cmd 4
        test_02_all_cmd_06: 3
      test_02_all_cmd_07: test07
    metadata:
      test_02_all_md_01: true
      test_02_all_md_02: all_md_1
      test_02_all_md_03:
        - all_md_4
        - all_md_5
  pdf: &pdf-test2
    command-line:
      test_02_pdf_cmd_01: true
      test_02_pdf_cmd_02:
        test_02_pdf_cmd_03:
          test_02_pdf_cmd_04: true
          test_02_pdf_cmd_05:
            - pdf_cmd 3
            - pdf_cmd 4
        test_02_pdf_cmd_06: 3
      test_02_pdf_cmd_07: test07
    metadata:
      test_02_pdf_md_01: true
      test_02_pdf_md_02: pdf_md_1
      test_02_pdf_md_03:
        - pdf_md_4
        - pdf_md_5
  latex:
    << : *pdf-test2
  html:
    command-line:
      test_02_html_cmd_01: true
      test_02_html_cmd_02:
        test_02_html_cmd_03:
          test_02_html_cmd_04: true
          test_02_html_cmd_05:
            - html_cmd 3
            - html_cmd 4
        test_02_html_cmd_06: 3
      test_02_html_cmd_07: test07
    metadata:
      test_02_html_md_01: true
      test_02_html_md_02: html_md_1
      test_02_html_md_03:
        - html_md_4
        - html_md_5

Func_test:
  all:
    metadata:
      lang: en

  pdf:
    command-line:
      pdf-engine: xelatex
    metadata:
      geometry: "a4paper, twoside, top=2cm, bottom=2cm, left=2.5cm"
      header-includes:
        - |
          \usepackage{titling}
          \pretitle{\begin{center}\LARGE\textbf}
          \posttitle{\par\end{center}\vskip 0.5em}
          \preauthor{\begin{center}
          \large \lineskip 0.5em%
          \begin{tabular}[t]{c}}
          \postauthor{\end{tabular}\par\end{center}}
          \predate{\begin{center}\large}
          \postdate{\par\end{center}}

Novel:
  inherits:
    - Html-self-contained
    - Extra-styles
  pdf: &pdf-novel
    command-line:
      template: ./config_dir/template/novel.tex
      top-level-division: chapter
      toc: true
      toc-depth: 3
    metadata:
      documentclass: scrbook
      DIV: calc
      paper: 6in:9in
      BCOR: 2mm
      center-headings: true
      fontsize: 10pt
      pagestyle: plain
      pdf-cover: false
      headsepline: false
      footsepline: false
      noindent: false
      toc-dots: false
  latex:
    << : *pdf-novel
  epub:
    preflight:
      - ./config_dir/preflight/dedication.py
      - ./config_dir/preflight/copyrights.py
    sass:
      files:
        - ./config_dir/sass/default_epub.scss
      output-path: temp
  html:
    preflight:
      - ./config_dir/preflight/dedication.py
      - ./config_dir/preflight/copyrights.py
    sass:
      variables:
        indent: true

Default-html:
  inherits: Navbar
  html:
    command-line:
      toc: true
    sass:
      files:
        - ./config_dir/sass/default.scss
    replace-in-template:
      - pattern: \$body\$
        replacement-text: |
          <div class="content">
          $body$
          </div>
    replace-in-output:
      - pattern: (<\/head>)
        count: 1
        add: true
        replacement-text: |
          <link href="https://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Oswald" rel="stylesheet">
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
  epub:
    sass:
      files:
        - ./config_dir/sass/default_epub.scss

# special fonts are not embedded.
Html-self-contained:
  inherits: Default-html
  html:
    command-line:
      self-contained: true
    sass:
      output-path: temp

Navbar:
  html:
    sass:
      files:
        - ./config_dir/sass/navigation.scss
      variables:
        nav-top: false
        nav-font-size: 11pt
        nav-media-breakpoint: 600px
        nav-sub-nav-width: 200px
        nav-background-color: "#FFFFFF"
        nav-hover-background-color: "#555"
        nav-text-color: "#000000"
        nav-hover-text-color: "#FFFFFF"
    replace-in-template:
      - pattern: \$table-of-contents\$
        replacement-text: |
          <div id="navbar">
          <input class="trigger" type="checkbox" id="mainNavButton">
          <label for="mainNavButton" onclick></label>
          $table-of-contents$
          </div>

Extra-styles:
  all:
    preflight:
      - ./config_dir/preflight/scenes.py
    command-line:
      filter:
        - ./config_dir/filter/new_page.py
        - ./config_dir/filter/epigraph.py
        - ./config_dir/filter/noindent.py
        - ./config_dir/filter/alignment.py
        - ./config_dir/filter/quote.py
        - ./config_dir/filter/poem.py
        - ./config_dir/filter/custom_styles.py
    metadata:
      poem-style: bottom
      quote-style: bottom
    scenes:
      new-scene-style: default
      new-scene-text: "* * *"
      new-scene-image: false
  html:
    sass:
      files:
        - ./config_dir/sass/extra_styles.scss
  epub:
    sass:
      files:
        - ./config_dir/sass/extra_styles.scss
...
